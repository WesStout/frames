using inputTest.Data;
using inputTest.Models;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
using System.Collections;

namespace inputTest.Pages.Paintings
{
    public class EditModel : PageModel
    {
        [BindProperty]
        public PaintingDto PaintingDto { get; set; } = new PaintingDto();

        public Painting Painting { get; set; } = new Painting();

        private readonly ApplicationDbContext _context;
        public EditModel(ApplicationDbContext context)
        {
            _context = context;
        }
        public IActionResult OnGet(int Id)
        {
            var painting = _context.Paintings.Find(Id);
            if (painting == null)
            {
                return RedirectToPage("/Paintings/Index");
            }

            


            Painting = painting;
            PaintingDto.Title = painting.Title;
            PaintingDto.Artist = painting.Artist;
            PaintingDto.Year = painting.Year;
            PaintingDto.data = file;
            PaintingDto.fileType = painting.fileType; 

            return Page();
        }
    }
}
